var emails=[],shoot={functions:{initProgress:function(){emails=[];var s=$("[data-button]");s.attr("disabled",!0),s.find("[progressing]").removeClass("hidden"),s.find("[progressed]").addClass("hidden"),$("#progress").slideDown(500).find("[data-progress]").html("0%").css("width","0%")},setProgress:function(s){$("[data-progress]").html(s+"%"),$("#progress").css("width",s+"%")},finishProgress:function(){$("[data-progress]").html("100%").css("width","100%");var s=$("[data-button]");s.attr("disabled",!1),s.find("[progressing]").addClass("hidden"),s.find("[progressed]").removeClass("hidden")},getEmails:function(n,t,i){$.ajax({url:"/api/admin/disparos/recuperar-emails",method:"post",data:{groups:n,skip:t}}).done(function(s){s=JSON.parse(s),emails=emails.concat(s.emails),s.finish?i(shoot.functions.uniqueEmails(emails)):shoot.functions.getEmails(n,t+50,i)})},uniqueEmails:function(s){return s.filter(function(s,n,t){return t.indexOf(s)===n})},sendEmails:function(s,n,t,i){$.ajax({url:$("#shoot").attr("action"),method:"post",data:{emails:s.slice(t,i),id:$('input[name="id"]').val()}}).done(function(){i<n?(shoot.functions.setProgress(parseInt(100*i/s.length)),shoot.functions.sendEmails(s,n,t+5,i+5)):(shoot.functions.finishProgress(),$("[data-success]").slideDown(500))})}},events:function(){$(document).on("submit","#shoot",function(s){s.preventDefault();var n=$(this).find('select[name="grupo_id"]').val();if(0===n.length)return!1;$("[data-success]").slideUp(500),shoot.functions.initProgress(),shoot.functions.getEmails(n,0,function(s){shoot.functions.sendEmails(s,s.length,0,5)})})}};shoot.events();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNob290LWVtYWlscy5qcyJdLCJuYW1lcyI6WyJlbWFpbHMiLCJzaG9vdCIsImZ1bmN0aW9ucyIsImluaXRQcm9ncmVzcyIsImJ1dHRvbiIsIiQiLCJhdHRyIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJzbGlkZURvd24iLCJodG1sIiwiY3NzIiwic2V0UHJvZ3Jlc3MiLCJwcm9ncmVzcyIsImZpbmlzaFByb2dyZXNzIiwiZ2V0RW1haWxzIiwiZ3JvdXBzIiwic2tpcCIsImNhbGxiYWNrIiwiYWpheCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJkb25lIiwiSlNPTiIsInBhcnNlIiwiY29uY2F0IiwiZmluaXNoIiwidW5pcXVlRW1haWxzIiwiZmlsdGVyIiwidmFsdWUiLCJpbmRleCIsInNlbGYiLCJpbmRleE9mIiwic2VuZEVtYWlscyIsInRvdGFsIiwieCIsInkiLCJzbGljZSIsImlkIiwidmFsIiwicGFyc2VJbnQiLCJsZW5ndGgiLCJldmVudHMiLCJkb2N1bWVudCIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGhpcyIsInNsaWRlVXAiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLE9BQVMsR0FFVEMsTUFBUSxDQUVSQyxVQUFXLENBQ1BDLGFBQWMsV0FDVkgsT0FBUyxHQUVULElBQUlJLEVBQVNDLEVBQUUsaUJBRWZELEVBQU9FLEtBQUssWUFBWSxHQUN4QkYsRUFBT0csS0FBSyxpQkFBaUJDLFlBQVksVUFDekNKLEVBQU9HLEtBQUssZ0JBQWdCRSxTQUFTLFVBRXJDSixFQUFFLGFBQWFLLFVBQVUsS0FBS0gsS0FBSyxtQkFBbUJJLEtBQUssTUFBTUMsSUFBSSxRQUFTLE9BR2xGQyxZQUFhLFNBQVNDLEdBQ2xCVCxFQUFFLG1CQUFtQk0sS0FBS0csRUFBVyxLQUNyQ1QsRUFBRSxhQUFhTyxJQUFJLFFBQVNFLEVBQVcsTUFHM0NDLGVBQWdCLFdBQ1pWLEVBQUUsbUJBQW1CTSxLQUFLLFFBQVFDLElBQUksUUFBUyxRQUUvQyxJQUFJUixFQUFTQyxFQUFFLGlCQUVmRCxFQUFPRSxLQUFLLFlBQVksR0FDeEJGLEVBQU9HLEtBQUssaUJBQWlCRSxTQUFTLFVBQ3RDTCxFQUFPRyxLQUFLLGdCQUFnQkMsWUFBWSxXQUc1Q1EsVUFBVyxTQUFTQyxFQUFRQyxFQUFNQyxHQUM5QmQsRUFBRWUsS0FBSyxDQUNIQyxJQUFLLHVDQUNMQyxPQUFRLE9BQ1JDLEtBQU0sQ0FBQ04sT0FBUUEsRUFBUUMsS0FBTUEsS0FDOUJNLEtBQUssU0FBU0QsR0FDYkEsRUFBT0UsS0FBS0MsTUFBTUgsR0FFbEJ2QixPQUFTQSxPQUFPMkIsT0FBT0osRUFBS3ZCLFFBRXZCdUIsRUFBS0ssT0FHTlQsRUFBU2xCLE1BQU1DLFVBQVUyQixhQUFhN0IsU0FGdENDLE1BQU1DLFVBQVVjLFVBQVVDLEVBQVFDLEVBQU8sR0FBSUMsTUFPekRVLGFBQWMsU0FBUzdCLEdBQ25CLE9BQU9BLEVBQU84QixPQUFPLFNBQVNDLEVBQU9DLEVBQU9DLEdBQ3hDLE9BQU9BLEVBQUtDLFFBQVFILEtBQVdDLEtBSXZDRyxXQUFZLFNBQVNuQyxFQUFRb0MsRUFBT0MsRUFBR0MsR0FDbkNqQyxFQUFFZSxLQUFLLENBQ0hDLElBQUtoQixFQUFFLFVBQVVDLEtBQUssVUFDdEJnQixPQUFRLE9BQ1JDLEtBQU0sQ0FDSnZCLE9BQVVBLEVBQU91QyxNQUFNRixFQUFHQyxHQUMxQkUsR0FBTW5DLEVBQUUsb0JBQW9Cb0MsU0FFaENqQixLQUFLLFdBQ0FjLEVBQUlGLEdBQ0huQyxNQUFNQyxVQUFVVyxZQUFZNkIsU0FBYyxJQUFKSixFQUFXdEMsRUFBTzJDLFNBQ3hEMUMsTUFBTUMsVUFBVWlDLFdBQVduQyxFQUFRb0MsRUFBT0MsRUFBSSxFQUFHQyxFQUFJLEtBRXJEckMsTUFBTUMsVUFBVWEsaUJBQ2hCVixFQUFFLGtCQUFrQkssVUFBVSxVQU05Q2tDLE9BQVEsV0FDUHZDLEVBQUV3QyxVQUFVQyxHQUFHLFNBQVUsU0FBVSxTQUFTQyxHQUNyQ0EsRUFBRUMsaUJBRUwsSUFBSS9CLEVBQVNaLEVBQUU0QyxNQUFNMUMsS0FBSywyQkFBMkJrQyxNQUVyRCxHQUFzQixJQUFsQnhCLEVBQU8wQixPQUNQLE9BQU8sRUFHWHRDLEVBQUUsa0JBQWtCNkMsUUFBUSxLQUM1QmpELE1BQU1DLFVBQVVDLGVBRWhCRixNQUFNQyxVQUFVYyxVQUFVQyxFQUFRLEVBQUcsU0FBU2pCLEdBQ3ZDQyxNQUFNQyxVQUFVaUMsV0FBV25DLEVBQVFBLEVBQU8yQyxPQUFRLEVBQUcsU0FNckUxQyxNQUFNMkMiLCJmaWxlIjoic2hvb3QtZW1haWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGVtYWlscyA9IFtdO1xyXG5cclxudmFyIHNob290ID0ge1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbnM6IHtcclxuICAgICAgICBpbml0UHJvZ3Jlc3M6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBlbWFpbHMgPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBidXR0b24gPSAkKCdbZGF0YS1idXR0b25dJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBidXR0b24uYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgYnV0dG9uLmZpbmQoJ1twcm9ncmVzc2luZ10nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5maW5kKCdbcHJvZ3Jlc3NlZF0nKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAkKCcjcHJvZ3Jlc3MnKS5zbGlkZURvd24oNTAwKS5maW5kKCdbZGF0YS1wcm9ncmVzc10nKS5odG1sKCcwJScpLmNzcygnd2lkdGgnLCAnMCUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIHNldFByb2dyZXNzOiBmdW5jdGlvbihwcm9ncmVzcyl7XHJcbiAgICAgICAgICAgICQoJ1tkYXRhLXByb2dyZXNzXScpLmh0bWwocHJvZ3Jlc3MgKyAnJScpO1xyXG4gICAgICAgICAgICAkKCcjcHJvZ3Jlc3MnKS5jc3MoJ3dpZHRoJywgcHJvZ3Jlc3MgKyAnJScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgZmluaXNoUHJvZ3Jlc3M6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoJ1tkYXRhLXByb2dyZXNzXScpLmh0bWwoJzEwMCUnKS5jc3MoJ3dpZHRoJywgJzEwMCUnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBidXR0b24gPSAkKCdbZGF0YS1idXR0b25dJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBidXR0b24uYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5maW5kKCdbcHJvZ3Jlc3NpbmddJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICBidXR0b24uZmluZCgnW3Byb2dyZXNzZWRdJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgZ2V0RW1haWxzOiBmdW5jdGlvbihncm91cHMsIHNraXAsIGNhbGxiYWNrKXtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9hcGkvYWRtaW4vZGlzcGFyb3MvcmVjdXBlcmFyLWVtYWlscycsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtncm91cHM6IGdyb3Vwcywgc2tpcDogc2tpcH1cclxuICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBlbWFpbHMgPSBlbWFpbHMuY29uY2F0KGRhdGEuZW1haWxzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmZpbmlzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob290LmZ1bmN0aW9ucy5nZXRFbWFpbHMoZ3JvdXBzLCBza2lwICsgNTAsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soc2hvb3QuZnVuY3Rpb25zLnVuaXF1ZUVtYWlscyhlbWFpbHMpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICB1bmlxdWVFbWFpbHM6IGZ1bmN0aW9uKGVtYWlscyl7XHJcbiAgICAgICAgICAgIHJldHVybiBlbWFpbHMuZmlsdGVyKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgc2VsZikgeyBcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmluZGV4T2YodmFsdWUpID09PSBpbmRleDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICBzZW5kRW1haWxzOiBmdW5jdGlvbihlbWFpbHMsIHRvdGFsLCB4LCB5KXtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogJCgnI3Nob290JykuYXR0cignYWN0aW9uJyksXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgIFx0ICAgICdlbWFpbHMnOiBlbWFpbHMuc2xpY2UoeCwgeSksXHJcbiAgICAgICAgICAgICBcdCAgICAnaWQnOiAkKCdpbnB1dFtuYW1lPVwiaWRcIl0nKS52YWwoKSBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgIGlmICh5IDwgdG90YWwpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNob290LmZ1bmN0aW9ucy5zZXRQcm9ncmVzcyhwYXJzZUludCgoeSAqIDEwMCkgLyBlbWFpbHMubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvb3QuZnVuY3Rpb25zLnNlbmRFbWFpbHMoZW1haWxzLCB0b3RhbCwgeCArIDUsIHkgKyA1KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvb3QuZnVuY3Rpb25zLmZpbmlzaFByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnW2RhdGEtc3VjY2Vzc10nKS5zbGlkZURvd24oNTAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBldmVudHM6IGZ1bmN0aW9uKCl7XHJcbiAgICBcdCQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI3Nob290JywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIFx0ICAgIFxyXG4gICAgXHQgICAgdmFyIGdyb3VwcyA9ICQodGhpcykuZmluZCgnc2VsZWN0W25hbWU9XCJncnVwb19pZFwiXScpLnZhbCgpO1xyXG4gICAgXHQgICAgXHJcbiAgICBcdCAgICBpZiAoZ3JvdXBzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgXHQgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIFx0ICAgIH1cclxuICAgIFx0ICAgIFxyXG4gICAgXHQgICAgJCgnW2RhdGEtc3VjY2Vzc10nKS5zbGlkZVVwKDUwMCk7XHJcbiAgICBcdCAgICBzaG9vdC5mdW5jdGlvbnMuaW5pdFByb2dyZXNzKCk7XHJcbiAgICBcdCAgICBcclxuICAgIFx0ICAgIHNob290LmZ1bmN0aW9ucy5nZXRFbWFpbHMoZ3JvdXBzLCAwLCBmdW5jdGlvbihlbWFpbHMpe1xyXG4gICAgICAgICAgICAgICAgc2hvb3QuZnVuY3Rpb25zLnNlbmRFbWFpbHMoZW1haWxzLCBlbWFpbHMubGVuZ3RoLCAwLCA1KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcdH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuc2hvb3QuZXZlbnRzKCk7Il19
