window.ToolbarConfigurator={},function(){function a(){this.instanceid="fte"+CKEDITOR.tools.getNextId(),this.textarea=new CKEDITOR.dom.element("textarea"),this.textarea.setAttributes({id:this.instanceid,name:this.instanceid,contentEditable:!0}),this.editorInstance=this.buttons=null}(ToolbarConfigurator.FullToolbarEditor=a).prototype.init=function(e){var n=this;document.body.appendChild(this.textarea.$),CKEDITOR.replace(this.instanceid),this.editorInstance=CKEDITOR.instances[this.instanceid],this.editorInstance.once("configLoaded",function(t){var o=t.editor.config;delete o.removeButtons,delete o.toolbarGroups,delete o.toolbar,ToolbarConfigurator.AbstractToolbarModifier.extendPluginsConfig(o),t.editor.once("loaded",function(){n.buttons=a.toolbarToButtons(n.editorInstance.toolbar),n.buttonsByGroup=a.groupButtons(n.buttons),n.buttonNamesByGroup=n.groupButtonNamesByGroup(n.buttons),t.editor.container.hide(),"function"==typeof e&&e(n.buttons)})})},a.prototype.groupButtonNamesByGroup=function(t){var o=this;for(var e in t=a.groupButtons(t))t[e]=a.map(t[e],function(t){return o.getCamelCasedButtonName(t.name)});return t},a.prototype.getGroupByName=function(t){for(var o=this.editorInstance.config.toolbarGroups||this.getFullToolbarGroupsConfig(),e=o.length,n=0;n<e;n+=1)if(o[n].name===t)return o[n];return null},a.prototype.getCamelCasedButtonName=function(t){var o,e=this.editorInstance.ui.items;for(o in e)if(e[o].name==t)return o;return null},a.prototype.getFullToolbarGroupsConfig=function(t){t=!0===t;for(var o=[],e=this.editorInstance.toolbar,n=e.length,r=0;r<n;r+=1){var a=e[r],i={};"string"!=typeof a.name?t&&o.push("/"):(i.name=a.name,a.groups&&(i.groups=Array.prototype.slice.call(a.groups)),o.push(i))}return o},a.filter=function(t,o){for(var e=t&&t.length?t.length:0,n=[],r=0;r<e;r+=1)o(t[r])&&n.push(t[r]);return n},a.map=function(t,o){var e;if(CKEDITOR.tools.isArray(t)){e=[];for(var n=t.length,r=0;r<n;r+=1)e.push(o(t[r]))}else for(n in e={},t)e[n]=o(t[n]);return e},a.groupButtons=function(t){for(var o={},e=t.length,n=0;n<e;n+=1){var r=t[n],a=r.toolbar.split(",")[0];o[a]=o[a]||[],o[a].push(r)}return o},a.toolbarToButtons=function(t){for(var o=[],e=t.length,n=0;n<e;n+=1)"object"==typeof t[n]&&(o=o.concat(a.groupToButtons(t[n])));return o},a.createToolbarButton=function(t){var o=new CKEDITOR.dom.element("a"),e=a.createIcon(t.name,t.icon,t.command);if(o.setStyle("float","none"),o.addClass("cke_"+("rtl"==CKEDITOR.lang.dir?"rtl":"ltr")),t instanceof CKEDITOR.ui.button)o.addClass("cke_button"),o.addClass("cke_toolgroup"),o.append(e);else if(CKEDITOR.ui.richCombo&&t instanceof CKEDITOR.ui.richCombo){e=new CKEDITOR.dom.element("span");var n=new CKEDITOR.dom.element("span"),r=new CKEDITOR.dom.element("span");o.addClass("cke_combo_button"),e.addClass("cke_combo_text"),e.addClass("cke_combo_inlinelabel"),e.setText(t.label),n.addClass("cke_combo_open"),r.addClass("cke_combo_arrow"),n.append(r),o.append(e),o.append(n)}return o},a.createIcon=function(t,o,e){var n=(n=(n=CKEDITOR.skin.getIconStyle(t,"rtl"==CKEDITOR.lang.dir))||CKEDITOR.skin.getIconStyle(o,"rtl"==CKEDITOR.lang.dir))||CKEDITOR.skin.getIconStyle(e,"rtl"==CKEDITOR.lang.dir);return(o=new CKEDITOR.dom.element("span")).addClass("cke_button_icon"),o.addClass("cke_button__"+t+"_icon"),o.setAttribute("style",n),o.setStyle("float","none"),o},a.createButton=function(t,o){var e=new CKEDITOR.dom.element("button");if(e.addClass("button-a"),e.setAttribute("type","button"),"string"==typeof o)for(var n=(o=o.split(" ")).length;n--;)e.addClass(o[n]);return e.setHtml(t),e},a.groupToButtons=function(t){for(var o=[],e=(t=t.items)?t.length:0,n=0;n<e;n+=1){var r=t[n];(r instanceof CKEDITOR.ui.button||CKEDITOR.ui.richCombo&&r instanceof CKEDITOR.ui.richCombo)&&(r.$=a.createToolbarButton(r),o.push(r))}return o}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNrZWRpdG9yL3NhbXBsZXMvdG9vbGJhcmNvbmZpZ3VyYXRvci9qcy9mdWxsdG9vbGJhcmVkaXRvci5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJUb29sYmFyQ29uZmlndXJhdG9yIiwiZSIsInRoaXMiLCJpbnN0YW5jZWlkIiwiQ0tFRElUT1IiLCJ0b29scyIsImdldE5leHRJZCIsInRleHRhcmVhIiwiZG9tIiwiZWxlbWVudCIsInNldEF0dHJpYnV0ZXMiLCJpZCIsIm5hbWUiLCJjb250ZW50RWRpdGFibGUiLCJlZGl0b3JJbnN0YW5jZSIsImJ1dHRvbnMiLCJGdWxsVG9vbGJhckVkaXRvciIsInByb3RvdHlwZSIsImluaXQiLCJiIiwiYSIsImRvY3VtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwiJCIsInJlcGxhY2UiLCJpbnN0YW5jZXMiLCJvbmNlIiwiZCIsImMiLCJlZGl0b3IiLCJjb25maWciLCJyZW1vdmVCdXR0b25zIiwidG9vbGJhckdyb3VwcyIsInRvb2xiYXIiLCJBYnN0cmFjdFRvb2xiYXJNb2RpZmllciIsImV4dGVuZFBsdWdpbnNDb25maWciLCJ0b29sYmFyVG9CdXR0b25zIiwiYnV0dG9uc0J5R3JvdXAiLCJncm91cEJ1dHRvbnMiLCJidXR0b25OYW1lc0J5R3JvdXAiLCJncm91cEJ1dHRvbk5hbWVzQnlHcm91cCIsImNvbnRhaW5lciIsImhpZGUiLCJtYXAiLCJnZXRDYW1lbENhc2VkQnV0dG9uTmFtZSIsImdldEdyb3VwQnlOYW1lIiwiZ2V0RnVsbFRvb2xiYXJHcm91cHNDb25maWciLCJsZW5ndGgiLCJ1aSIsIml0ZW1zIiwiZiIsImciLCJwdXNoIiwiZ3JvdXBzIiwiQXJyYXkiLCJzbGljZSIsImNhbGwiLCJmaWx0ZXIiLCJpc0FycmF5Iiwic3BsaXQiLCJjb25jYXQiLCJncm91cFRvQnV0dG9ucyIsImNyZWF0ZVRvb2xiYXJCdXR0b24iLCJjcmVhdGVJY29uIiwiaWNvbiIsImNvbW1hbmQiLCJzZXRTdHlsZSIsImFkZENsYXNzIiwibGFuZyIsImRpciIsImJ1dHRvbiIsImFwcGVuZCIsInJpY2hDb21ibyIsInNldFRleHQiLCJsYWJlbCIsInNraW4iLCJnZXRJY29uU3R5bGUiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVCdXR0b24iLCJzZXRIdG1sIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0Msb0JBQW9CLEdBQzNCLFdBQVksU0FBU0MsSUFBSUMsS0FBS0MsV0FBVyxNQUFNQyxTQUFTQyxNQUFNQyxZQUFZSixLQUFLSyxTQUFTLElBQUlILFNBQVNJLElBQUlDLFFBQVEsWUFBWVAsS0FBS0ssU0FBU0csY0FBYyxDQUFDQyxHQUFHVCxLQUFLQyxXQUFXUyxLQUFLVixLQUFLQyxXQUFXVSxpQkFBZ0IsSUFBS1gsS0FBS1ksZUFBZVosS0FBS2EsUUFBUSxNQUFLZixvQkFBb0JnQixrQkFBa0JmLEdBQUlnQixVQUFVQyxLQUFLLFNBQVNDLEdBQUcsSUFBSUMsRUFBRWxCLEtBQUttQixTQUFTQyxLQUFLQyxZQUFZckIsS0FBS0ssU0FBU2lCLEdBQUdwQixTQUFTcUIsUUFBUXZCLEtBQUtDLFlBQVlELEtBQUtZLGVBQWVWLFNBQVNzQixVQUFVeEIsS0FBS0MsWUFBWUQsS0FBS1ksZUFBZWEsS0FBSyxlQUFlLFNBQVNDLEdBQUcsSUFBSUMsRUFDMWdCRCxFQUFFRSxPQUFPQyxjQUFjRixFQUFFRyxxQkFBcUJILEVBQUVJLHFCQUFxQkosRUFBRUssUUFBUWxDLG9CQUFvQm1DLHdCQUF3QkMsb0JBQW9CUCxHQUFHRCxFQUFFRSxPQUFPSCxLQUFLLFNBQVMsV0FBV1AsRUFBRUwsUUFBUWQsRUFBRW9DLGlCQUFpQmpCLEVBQUVOLGVBQWVvQixTQUFTZCxFQUFFa0IsZUFBZXJDLEVBQUVzQyxhQUFhbkIsRUFBRUwsU0FBU0ssRUFBRW9CLG1CQUFtQnBCLEVBQUVxQix3QkFBd0JyQixFQUFFTCxTQUFTYSxFQUFFRSxPQUFPWSxVQUFVQyxPQUFPLG1CQUFvQnhCLEdBQUdBLEVBQUVDLEVBQUVMLGNBQWNkLEVBQUVnQixVQUFVd0Isd0JBQXdCLFNBQVN0QixHQUFHLElBQUlDLEVBQUVsQixLQUF5QixJQUFJLElBQUkwQixLQUE1QlQsRUFBRWxCLEVBQUVzQyxhQUFhcEIsR0FBa0JBLEVBQUVTLEdBQ25mM0IsRUFBRTJDLElBQUl6QixFQUFFUyxHQUFHLFNBQVNULEdBQUcsT0FBT0MsRUFBRXlCLHdCQUF3QjFCLEVBQUVQLFFBQVEsT0FBT08sR0FBR2xCLEVBQUVnQixVQUFVNkIsZUFBZSxTQUFTM0IsR0FBRyxJQUFJLElBQUlDLEVBQUVsQixLQUFLWSxlQUFlaUIsT0FBT0UsZUFBZS9CLEtBQUs2Qyw2QkFBNkJuQixFQUFFUixFQUFFNEIsT0FBT25CLEVBQUUsRUFBRUEsRUFBRUQsRUFBRUMsR0FBRyxFQUFFLEdBQUdULEVBQUVTLEdBQUdqQixPQUFPTyxFQUFFLE9BQU9DLEVBQUVTLEdBQUcsT0FBTyxNQUFNNUIsRUFBRWdCLFVBQVU0Qix3QkFBd0IsU0FBUzFCLEdBQUcsSUFBbUNTLEVBQS9CUixFQUFFbEIsS0FBS1ksZUFBZW1DLEdBQUdDLE1BQVEsSUFBSXRCLEtBQUtSLEVBQUUsR0FBR0EsRUFBRVEsR0FBR2hCLE1BQU1PLEVBQUUsT0FBT1MsRUFBRSxPQUFPLE1BQU0zQixFQUFFZ0IsVUFBVThCLDJCQUEyQixTQUFTNUIsR0FBR0EsR0FBRSxJQUFLQSxFQUFRLElBQUksSUFBSUMsRUFBRSxHQUFHUSxFQUFFMUIsS0FBS1ksZUFBZW9CLFFBQ3RmTCxFQUFFRCxFQUFFb0IsT0FBT0csRUFBRSxFQUFFQSxFQUFFdEIsRUFBRXNCLEdBQUcsRUFBRSxDQUFDLElBQUlsRCxFQUFFMkIsRUFBRXVCLEdBQUdDLEVBQUUsR0FBRyxpQkFBaUJuRCxFQUFFVyxLQUFLTyxHQUFHQyxFQUFFaUMsS0FBSyxNQUFNRCxFQUFFeEMsS0FBS1gsRUFBRVcsS0FBS1gsRUFBRXFELFNBQVNGLEVBQUVFLE9BQU9DLE1BQU10QyxVQUFVdUMsTUFBTUMsS0FBS3hELEVBQUVxRCxTQUFTbEMsRUFBRWlDLEtBQUtELElBQUksT0FBT2hDLEdBQUduQixFQUFFeUQsT0FBTyxTQUFTdkMsRUFBRUMsR0FBRyxJQUFJLElBQUlRLEVBQUVULEdBQUdBLEVBQUU2QixPQUFPN0IsRUFBRTZCLE9BQU8sRUFBRW5CLEVBQUUsR0FBR3NCLEVBQUUsRUFBRUEsRUFBRXZCLEVBQUV1QixHQUFHLEVBQUUvQixFQUFFRCxFQUFFZ0MsS0FBS3RCLEVBQUV3QixLQUFLbEMsRUFBRWdDLElBQUksT0FBT3RCLEdBQUc1QixFQUFFMkMsSUFBSSxTQUFTekIsRUFBRUMsR0FBRyxJQUFJUSxFQUFFLEdBQUd4QixTQUFTQyxNQUFNc0QsUUFBUXhDLEdBQUcsQ0FBQ1MsRUFBRSxHQUFHLElBQUksSUFBSUMsRUFBRVYsRUFBRTZCLE9BQU9HLEVBQUUsRUFBRUEsRUFBRXRCLEVBQUVzQixHQUFHLEVBQUV2QixFQUFFeUIsS0FBS2pDLEVBQUVELEVBQUVnQyxVQUFVLElBQUl0QixLQUFLRCxFQUFFLEdBQUdULEVBQUVTLEVBQUVDLEdBQUdULEVBQUVELEVBQUVVLElBQUksT0FBT0QsR0FBRzNCLEVBQUVzQyxhQUFhLFNBQVNwQixHQUFHLElBQUksSUFBSUMsRUFBRSxHQUFHUSxFQUFFVCxFQUFFNkIsT0FBT25CLEVBQUUsRUFBRUEsRUFBRUQsRUFBRUMsR0FBRyxFQUFFLENBQUMsSUFBSXNCLEVBQ3RmaEMsRUFBRVUsR0FBRzVCLEVBQUVrRCxFQUFFakIsUUFBUTBCLE1BQU0sS0FBSyxHQUFHeEMsRUFBRW5CLEdBQUdtQixFQUFFbkIsSUFBSSxHQUFHbUIsRUFBRW5CLEdBQUdvRCxLQUFLRixHQUFHLE9BQU8vQixHQUFHbkIsRUFBRW9DLGlCQUFpQixTQUFTbEIsR0FBRyxJQUFJLElBQUlDLEVBQUUsR0FBR1EsRUFBRVQsRUFBRTZCLE9BQU9uQixFQUFFLEVBQUVBLEVBQUVELEVBQUVDLEdBQUcsRUFBRSxpQkFBaUJWLEVBQUVVLEtBQUtULEVBQUVBLEVBQUV5QyxPQUFPNUQsRUFBRTZELGVBQWUzQyxFQUFFVSxNQUFNLE9BQU9ULEdBQUduQixFQUFFOEQsb0JBQW9CLFNBQVM1QyxHQUFHLElBQUlDLEVBQUUsSUFBSWhCLFNBQVNJLElBQUlDLFFBQVEsS0FBS21CLEVBQUUzQixFQUFFK0QsV0FBVzdDLEVBQUVQLEtBQUtPLEVBQUU4QyxLQUFLOUMsRUFBRStDLFNBQThGLEdBQXJGOUMsRUFBRStDLFNBQVMsUUFBUSxRQUFRL0MsRUFBRWdELFNBQVMsUUFBUSxPQUFPaEUsU0FBU2lFLEtBQUtDLElBQUksTUFBTSxRQUFXbkQsYUFBYWYsU0FBUzZDLEdBQUdzQixPQUFPbkQsRUFBRWdELFNBQVMsY0FBY2hELEVBQUVnRCxTQUFTLGlCQUFpQmhELEVBQUVvRCxPQUFPNUMsUUFDN2UsR0FBR3hCLFNBQVM2QyxHQUFHd0IsV0FBV3RELGFBQWFmLFNBQVM2QyxHQUFHd0IsVUFBVSxDQUFLN0MsRUFBRSxJQUFJeEIsU0FBU0ksSUFBSUMsUUFBUSxRQUEvQixJQUF1Q29CLEVBQUUsSUFBSXpCLFNBQVNJLElBQUlDLFFBQVEsUUFBUTBDLEVBQUUsSUFBSS9DLFNBQVNJLElBQUlDLFFBQVEsUUFBUVcsRUFBRWdELFNBQVMsb0JBQW9CeEMsRUFBRXdDLFNBQVMsa0JBQWtCeEMsRUFBRXdDLFNBQVMseUJBQXlCeEMsRUFBRThDLFFBQVF2RCxFQUFFd0QsT0FBTzlDLEVBQUV1QyxTQUFTLGtCQUFrQmpCLEVBQUVpQixTQUFTLG1CQUFtQnZDLEVBQUUyQyxPQUFPckIsR0FBRy9CLEVBQUVvRCxPQUFPNUMsR0FBR1IsRUFBRW9ELE9BQU8zQyxHQUFHLE9BQU9ULEdBQUduQixFQUFFK0QsV0FBVyxTQUFTN0MsRUFBRUMsRUFBRVEsR0FBRyxJQUE2REMsR0FBR0EsR0FBNURBLEVBQUV6QixTQUFTd0UsS0FBS0MsYUFBYTFELEVBQUUsT0FBT2YsU0FBU2lFLEtBQUtDLE9BQWFsRSxTQUFTd0UsS0FBS0MsYUFBYXpELEVBQ3pnQixPQUFPaEIsU0FBU2lFLEtBQUtDLE9BQU9sRSxTQUFTd0UsS0FBS0MsYUFBYWpELEVBQUUsT0FBT3hCLFNBQVNpRSxLQUFLQyxLQUFnSyxPQUEzSmxELEVBQUUsSUFBSWhCLFNBQVNJLElBQUlDLFFBQVEsU0FBVTJELFNBQVMsbUJBQW1CaEQsRUFBRWdELFNBQVMsZUFBZWpELEVBQUUsU0FBU0MsRUFBRTBELGFBQWEsUUFBUWpELEdBQUdULEVBQUUrQyxTQUFTLFFBQVEsUUFBZS9DLEdBQUduQixFQUFFOEUsYUFBYSxTQUFTNUQsRUFBRUMsR0FBRyxJQUFJUSxFQUFFLElBQUl4QixTQUFTSSxJQUFJQyxRQUFRLFVBQWlFLEdBQXZEbUIsRUFBRXdDLFNBQVMsWUFBWXhDLEVBQUVrRCxhQUFhLE9BQU8sVUFBYSxpQkFBaUIxRCxFQUFrQixJQUFJLElBQUlTLEdBQXZCVCxFQUFFQSxFQUFFd0MsTUFBTSxNQUFpQlosT0FBT25CLEtBQUtELEVBQUV3QyxTQUFTaEQsRUFBRVMsSUFBaUIsT0FBYkQsRUFBRW9ELFFBQVE3RCxHQUFVUyxHQUFHM0IsRUFBRTZELGVBQWUsU0FBUzNDLEdBQUcsSUFBSSxJQUFJQyxFQUNoZ0IsR0FBR1EsR0FBR1QsRUFBRUEsRUFBRStCLE9BQU8vQixFQUFFNkIsT0FBTyxFQUFFbkIsRUFBRSxFQUFFQSxFQUFFRCxFQUFFQyxHQUFHLEVBQUUsQ0FBQyxJQUFJc0IsRUFBRWhDLEVBQUVVLElBQU1zQixhQUFhL0MsU0FBUzZDLEdBQUdzQixRQUFRbkUsU0FBUzZDLEdBQUd3QixXQUFXdEIsYUFBYS9DLFNBQVM2QyxHQUFHd0IsYUFBVXRCLEVBQUUzQixFQUFFdkIsRUFBRThELG9CQUFvQlosR0FBRy9CLEVBQUVpQyxLQUFLRixJQUFHLE9BQU8vQixHQVBqTSIsImZpbGUiOiJja2VkaXRvci9zYW1wbGVzL3Rvb2xiYXJjb25maWd1cmF0b3IvanMvZnVsbHRvb2xiYXJlZGl0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cuVG9vbGJhckNvbmZpZ3VyYXRvcj17fTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuaW5zdGFuY2VpZD1cImZ0ZVwiK0NLRURJVE9SLnRvb2xzLmdldE5leHRJZCgpO3RoaXMudGV4dGFyZWE9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwidGV4dGFyZWFcIik7dGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGVzKHtpZDp0aGlzLmluc3RhbmNlaWQsbmFtZTp0aGlzLmluc3RhbmNlaWQsY29udGVudEVkaXRhYmxlOiEwfSk7dGhpcy5lZGl0b3JJbnN0YW5jZT10aGlzLmJ1dHRvbnM9bnVsbH1Ub29sYmFyQ29uZmlndXJhdG9yLkZ1bGxUb29sYmFyRWRpdG9yPWU7ZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihiKXt2YXIgYT10aGlzO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy50ZXh0YXJlYS4kKTtDS0VESVRPUi5yZXBsYWNlKHRoaXMuaW5zdGFuY2VpZCk7dGhpcy5lZGl0b3JJbnN0YW5jZT1DS0VESVRPUi5pbnN0YW5jZXNbdGhpcy5pbnN0YW5jZWlkXTt0aGlzLmVkaXRvckluc3RhbmNlLm9uY2UoXCJjb25maWdMb2FkZWRcIixmdW5jdGlvbihkKXt2YXIgYz1cclxuZC5lZGl0b3IuY29uZmlnO2RlbGV0ZSBjLnJlbW92ZUJ1dHRvbnM7ZGVsZXRlIGMudG9vbGJhckdyb3VwcztkZWxldGUgYy50b29sYmFyO1Rvb2xiYXJDb25maWd1cmF0b3IuQWJzdHJhY3RUb29sYmFyTW9kaWZpZXIuZXh0ZW5kUGx1Z2luc0NvbmZpZyhjKTtkLmVkaXRvci5vbmNlKFwibG9hZGVkXCIsZnVuY3Rpb24oKXthLmJ1dHRvbnM9ZS50b29sYmFyVG9CdXR0b25zKGEuZWRpdG9ySW5zdGFuY2UudG9vbGJhcik7YS5idXR0b25zQnlHcm91cD1lLmdyb3VwQnV0dG9ucyhhLmJ1dHRvbnMpO2EuYnV0dG9uTmFtZXNCeUdyb3VwPWEuZ3JvdXBCdXR0b25OYW1lc0J5R3JvdXAoYS5idXR0b25zKTtkLmVkaXRvci5jb250YWluZXIuaGlkZSgpO1wiZnVuY3Rpb25cIj09PXR5cGVvZiBiJiZiKGEuYnV0dG9ucyl9KX0pfTtlLnByb3RvdHlwZS5ncm91cEJ1dHRvbk5hbWVzQnlHcm91cD1mdW5jdGlvbihiKXt2YXIgYT10aGlzO2I9ZS5ncm91cEJ1dHRvbnMoYik7Zm9yKHZhciBkIGluIGIpYltkXT1cclxuZS5tYXAoYltkXSxmdW5jdGlvbihiKXtyZXR1cm4gYS5nZXRDYW1lbENhc2VkQnV0dG9uTmFtZShiLm5hbWUpfSk7cmV0dXJuIGJ9O2UucHJvdG90eXBlLmdldEdyb3VwQnlOYW1lPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYT10aGlzLmVkaXRvckluc3RhbmNlLmNvbmZpZy50b29sYmFyR3JvdXBzfHx0aGlzLmdldEZ1bGxUb29sYmFyR3JvdXBzQ29uZmlnKCksZD1hLmxlbmd0aCxjPTA7YzxkO2MrPTEpaWYoYVtjXS5uYW1lPT09YilyZXR1cm4gYVtjXTtyZXR1cm4gbnVsbH07ZS5wcm90b3R5cGUuZ2V0Q2FtZWxDYXNlZEJ1dHRvbk5hbWU9ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5lZGl0b3JJbnN0YW5jZS51aS5pdGVtcyxkO2ZvcihkIGluIGEpaWYoYVtkXS5uYW1lPT1iKXJldHVybiBkO3JldHVybiBudWxsfTtlLnByb3RvdHlwZS5nZXRGdWxsVG9vbGJhckdyb3Vwc0NvbmZpZz1mdW5jdGlvbihiKXtiPSEwPT09Yj8hMDohMTtmb3IodmFyIGE9W10sZD10aGlzLmVkaXRvckluc3RhbmNlLnRvb2xiYXIsXHJcbmM9ZC5sZW5ndGgsZj0wO2Y8YztmKz0xKXt2YXIgZT1kW2ZdLGc9e307XCJzdHJpbmdcIiE9dHlwZW9mIGUubmFtZT9iJiZhLnB1c2goXCIvXCIpOihnLm5hbWU9ZS5uYW1lLGUuZ3JvdXBzJiYoZy5ncm91cHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZS5ncm91cHMpKSxhLnB1c2goZykpfXJldHVybiBhfTtlLmZpbHRlcj1mdW5jdGlvbihiLGEpe2Zvcih2YXIgZD1iJiZiLmxlbmd0aD9iLmxlbmd0aDowLGM9W10sZj0wO2Y8ZDtmKz0xKWEoYltmXSkmJmMucHVzaChiW2ZdKTtyZXR1cm4gY307ZS5tYXA9ZnVuY3Rpb24oYixhKXt2YXIgZDtpZihDS0VESVRPUi50b29scy5pc0FycmF5KGIpKXtkPVtdO2Zvcih2YXIgYz1iLmxlbmd0aCxmPTA7ZjxjO2YrPTEpZC5wdXNoKGEoYltmXSkpfWVsc2UgZm9yKGMgaW4gZD17fSxiKWRbY109YShiW2NdKTtyZXR1cm4gZH07ZS5ncm91cEJ1dHRvbnM9ZnVuY3Rpb24oYil7Zm9yKHZhciBhPXt9LGQ9Yi5sZW5ndGgsYz0wO2M8ZDtjKz0xKXt2YXIgZj1cclxuYltjXSxlPWYudG9vbGJhci5zcGxpdChcIixcIilbMF07YVtlXT1hW2VdfHxbXTthW2VdLnB1c2goZil9cmV0dXJuIGF9O2UudG9vbGJhclRvQnV0dG9ucz1mdW5jdGlvbihiKXtmb3IodmFyIGE9W10sZD1iLmxlbmd0aCxjPTA7YzxkO2MrPTEpXCJvYmplY3RcIj09dHlwZW9mIGJbY10mJihhPWEuY29uY2F0KGUuZ3JvdXBUb0J1dHRvbnMoYltjXSkpKTtyZXR1cm4gYX07ZS5jcmVhdGVUb29sYmFyQnV0dG9uPWZ1bmN0aW9uKGIpe3ZhciBhPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcImFcIiksZD1lLmNyZWF0ZUljb24oYi5uYW1lLGIuaWNvbixiLmNvbW1hbmQpO2Euc2V0U3R5bGUoXCJmbG9hdFwiLFwibm9uZVwiKTthLmFkZENsYXNzKFwiY2tlX1wiKyhcInJ0bFwiPT1DS0VESVRPUi5sYW5nLmRpcj9cInJ0bFwiOlwibHRyXCIpKTtpZihiIGluc3RhbmNlb2YgQ0tFRElUT1IudWkuYnV0dG9uKWEuYWRkQ2xhc3MoXCJja2VfYnV0dG9uXCIpLGEuYWRkQ2xhc3MoXCJja2VfdG9vbGdyb3VwXCIpLGEuYXBwZW5kKGQpO1xyXG5lbHNlIGlmKENLRURJVE9SLnVpLnJpY2hDb21ibyYmYiBpbnN0YW5jZW9mIENLRURJVE9SLnVpLnJpY2hDb21ibyl7dmFyIGQ9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwic3BhblwiKSxjPW5ldyBDS0VESVRPUi5kb20uZWxlbWVudChcInNwYW5cIiksZj1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJzcGFuXCIpO2EuYWRkQ2xhc3MoXCJja2VfY29tYm9fYnV0dG9uXCIpO2QuYWRkQ2xhc3MoXCJja2VfY29tYm9fdGV4dFwiKTtkLmFkZENsYXNzKFwiY2tlX2NvbWJvX2lubGluZWxhYmVsXCIpO2Quc2V0VGV4dChiLmxhYmVsKTtjLmFkZENsYXNzKFwiY2tlX2NvbWJvX29wZW5cIik7Zi5hZGRDbGFzcyhcImNrZV9jb21ib19hcnJvd1wiKTtjLmFwcGVuZChmKTthLmFwcGVuZChkKTthLmFwcGVuZChjKX1yZXR1cm4gYX07ZS5jcmVhdGVJY29uPWZ1bmN0aW9uKGIsYSxkKXt2YXIgYz1DS0VESVRPUi5za2luLmdldEljb25TdHlsZShiLFwicnRsXCI9PUNLRURJVE9SLmxhbmcuZGlyKSxjPShjPWN8fENLRURJVE9SLnNraW4uZ2V0SWNvblN0eWxlKGEsXHJcblwicnRsXCI9PUNLRURJVE9SLmxhbmcuZGlyKSl8fENLRURJVE9SLnNraW4uZ2V0SWNvblN0eWxlKGQsXCJydGxcIj09Q0tFRElUT1IubGFuZy5kaXIpO2E9bmV3IENLRURJVE9SLmRvbS5lbGVtZW50KFwic3BhblwiKTthLmFkZENsYXNzKFwiY2tlX2J1dHRvbl9pY29uXCIpO2EuYWRkQ2xhc3MoXCJja2VfYnV0dG9uX19cIitiK1wiX2ljb25cIik7YS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLGMpO2Euc2V0U3R5bGUoXCJmbG9hdFwiLFwibm9uZVwiKTtyZXR1cm4gYX07ZS5jcmVhdGVCdXR0b249ZnVuY3Rpb24oYixhKXt2YXIgZD1uZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQoXCJidXR0b25cIik7ZC5hZGRDbGFzcyhcImJ1dHRvbi1hXCIpO2Quc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiYnV0dG9uXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhKXthPWEuc3BsaXQoXCIgXCIpO2Zvcih2YXIgYz1hLmxlbmd0aDtjLS07KWQuYWRkQ2xhc3MoYVtjXSl9ZC5zZXRIdG1sKGIpO3JldHVybiBkfTtlLmdyb3VwVG9CdXR0b25zPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYT1cclxuW10sZD0oYj1iLml0ZW1zKT9iLmxlbmd0aDowLGM9MDtjPGQ7Yys9MSl7dmFyIGY9YltjXTtpZihmIGluc3RhbmNlb2YgQ0tFRElUT1IudWkuYnV0dG9ufHxDS0VESVRPUi51aS5yaWNoQ29tYm8mJmYgaW5zdGFuY2VvZiBDS0VESVRPUi51aS5yaWNoQ29tYm8pZi4kPWUuY3JlYXRlVG9vbGJhckJ1dHRvbihmKSxhLnB1c2goZil9cmV0dXJuIGF9fSkoKTsiXX0=
